{% extends 'core3/base_rrhh.html' %}
{% block title %}Lista de Empleados{% endblock %}
{% block content %}
<main class="main-content">
    <section class="seccion">
        <h2>Gestión de Empleados</h2>
        
        <!-- Buscador -->
        <form method="GET" class="busqueda-form">
            <input type="text" name="buscar" placeholder="Buscar por nombre, cédula o correo..." value="{{ busqueda }}" class="input">
            <button type="submit" class="button blue">Buscar</button>
        </form>

        <!-- Filtros -->
        <div class="filtros">
            <a href="{% url 'lista_empleados_rrhh' %}?estado=todos" class="button">Todos</a>
            <a href="{% url 'lista_empleados_rrhh' %}?estado=activos" class="button green">Activos</a>
            <a href="{% url 'lista_empleados_rrhh' %}?estado=inactivos" class="button red">Inactivos</a>
        </div>
    </section>

    <section class="seccion">
        {% if empleados %}
        <table class="table table--striped table--hover">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Nombre</th>
                    <th>Cédula</th>
                    <th>Correo</th>
                    <th>Categoría</th>
                    <th>Fecha Ingreso</th>
                    <th>Estado</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                {% for empleado in empleados %}
                <tr>
                    <td>{{ forloop.counter }}</td>
                    <td><strong>{{ empleado.nombre }} {{ empleado.apellido }}</strong></td>
                    <td>{{ empleado.cedula }}</td>
                    <td>{{ empleado.correo }}</td>
                    <td>{{ empleado.categoria.nombre|default:"N/A" }}</td>
                    <td>{{ empleado.fecha_ingreso|date:"d/m/Y" }}</td>
                    <td>
                        {% if empleado.activo %}
                            <span class="badge badge-success">✓ Activo</span>
                        {% else %}
                            <span class="badge badge-danger">○ Inactivo</span>
                        {% endif %}
                    </td>
                    <td>
                        <a href="{% url 'detalle_empleado_rrhh' empleado.id %}" class="button blue" style="padding: 6px 12px; font-size: 13px;">Ver</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p class="texto-centro">No se encontraron empleados.</p>
        {% endif %}
    </section>
</main>
{% endblock %}