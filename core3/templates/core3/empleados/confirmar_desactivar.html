{% extends 'core3/base_rrhh.html' %}
{% load static %}

{% block title %}Confirmar Desactivaci√≥n - Recursos Humanos{% endblock %}

{% block content %}
<main class="main-content">
    <section class="seccion texto-centro">
        <h2>Confirmar Cambio de Estado del Empleado</h2>
        <p>Est√°s a punto de cambiar el estado del empleado</p>
    </section>

    <!-- Informaci√≥n del Empleado -->
    <section class="seccion">
        <h3>Informaci√≥n del Empleado</h3>
        <div class="cards-container">
            <div class="card">
                <h4 class="card-title">üë§ Datos Personales</h4>
                <p class="card-content">
                    <strong>Nombre:</strong> {{ empleado.nombre }} {{ empleado.apellido }}<br>
                    <strong>C√©dula:</strong> {{ empleado.cedula }}<br>
                    <strong>Correo:</strong> {{ empleado.correo }}
                </p>
            </div>

            <div class="card">
                <h4 class="card-title">üíº Informaci√≥n Laboral</h4>
                <p class="card-content">
                    <strong>Categor√≠a:</strong> {{ empleado.categoria.nombre|default:"No asignada" }}<br>
                    <strong>Fecha de Ingreso:</strong> {{ empleado.fecha_ingreso|date:"d/m/Y" }}<br>
                    <strong>A√±os en la empresa:</strong> {{ empleado.anos_en_empresa }}
                </p>
            </div>

            <div class="card">
                <h4 class="card-title">üìä Estado Actual</h4>
                <p class="card-content">
                    {% if empleado.activo %}
                    <span style="font-size: 2rem; color: #43e97b;">‚úì Activo</span>
                    {% else %}
                    <span style="font-size: 2rem; color: #f5576c;">‚óã Inactivo</span>
                    {% endif %}
                </p>
            </div>
        </div>
    </section>

    <!-- Advertencia de Acci√≥n -->
    <section class="seccion">
        <div style="background: rgba(255, 193, 7, 0.1); padding: 30px; border-radius: 12px;">
            <h3 style="text-align: center; margin-top: 0;">
                {% if empleado.activo %}
                    ‚ö†Ô∏è Desactivar Empleado
                {% else %}
                    ‚úì Activar Empleado
                {% endif %}
            </h3>
            
            {% if empleado.activo %}
                <p style="text-align: center; font-size: 1.1rem;">
                    ¬øEst√°s seguro de que deseas <strong>DESACTIVAR</strong> a este empleado?
                </p>
                
                <div style="margin-top: 20px;">
                    <h4>Consecuencias de la desactivaci√≥n:</h4>
                    <ul style="line-height: 1.8;">
                        <li>El empleado no podr√° acceder al sistema</li>
                        <li>No se generar√°n n√≥minas autom√°ticas para este empleado</li>
                        <li>Sus permisos pendientes quedar√°n en estado actual</li>
                        <li>El historial de n√≥minas y permisos se mantendr√°</li>
                        <li>Esta acci√≥n es reversible - puedes reactivar el empleado cuando lo necesites</li>
                    </ul>
                </div>
            {% else %}
                <p style="text-align: center; font-size: 1.1rem;">
                    ¬øEst√°s seguro de que deseas <strong>ACTIVAR</strong> a este empleado?
                </p>
                
                <div style="margin-top: 20px;">
                    <h4>Efectos de la activaci√≥n:</h4>
                    <ul style="line-height: 1.8;">
                        <li>El empleado podr√° acceder nuevamente al sistema</li>
                        <li>Se incluir√° en la generaci√≥n autom√°tica de n√≥minas</li>
                        <li>Podr√° solicitar permisos y gestionar sus datos</li>
                        <li>Su historial anterior se mantendr√° intacto</li>
                    </ul>
                </div>
            {% endif %}
        </div>
    </section>

    <!-- Estad√≠sticas del Empleado -->
    <section class="seccion">
        <h3>Estad√≠sticas del Empleado</h3>
        <div class="cards-container">
            <div class="card stat-card">
                <h4 class="card-title">üí∞ N√≥minas Procesadas</h4>
                <div class="stat-number">{{ empleado.nominas.count }}</div>
                <div class="stat-label">Total de n√≥minas</div>
            </div>

            <div class="card stat-card">
                <h4 class="card-title">‚è∞ Permisos Solicitados</h4>
                <div class="stat-number">{{ empleado.permisos.count }}</div>
                <div class="stat-label">Total de permisos</div>
            </div>

            <div class="card stat-card">
                <h4 class="card-title">üìÖ Antig√ºedad</h4>
                <div class="stat-number">{{ empleado.dias_en_empresa }}</div>
                <div class="stat-label">D√≠as en la empresa</div>
            </div>
        </div>
    </section>

    <!-- Formulario de Confirmaci√≥n -->
    <section class="seccion texto-centro">
        <form method="POST" style="display: inline-block;">
            {% csrf_token %}
            
            {% if empleado.activo %}
                <button type="submit" class="button red" style="padding: 16px 48px; font-size: 18px; margin: 10px;">
                    Confirmar Desactivaci√≥n
                </button>
            {% else %}
                <button type="submit" class="button green" style="padding: 16px 48px; font-size: 18px; margin: 10px;">
                    Confirmar Activaci√≥n
                </button>
            {% endif %}
            
            <a href="{% url 'detalle_empleado_rrhh' empleado.id %}" 
               class="button" 
               style="padding: 16px 48px; font-size: 18px; margin: 10px; text-decoration: none; display: inline-block;">
                Cancelar
            </a>
        </form>
    </section>

    <!-- Informaci√≥n Adicional -->
    <section class="seccion">
        <h3>‚ÑπÔ∏è Informaci√≥n Importante</h3>
        <div style="background: rgba(79, 172, 254, 0.1); padding: 20px; border-radius: 12px;">
            <h4 style="margin-top: 0;">Buenas Pr√°cticas:</h4>
            <ul style="line-height: 1.8;">
                <li><strong>Documentaci√≥n:</strong> Aseg√∫rate de tener documentaci√≥n sobre la raz√≥n del cambio de estado</li>
                <li><strong>Comunicaci√≥n:</strong> Notifica al empleado sobre cualquier cambio en su estatus</li>
                <li><strong>Revisi√≥n:</strong> Revisa si hay permisos pendientes o n√≥minas sin procesar</li>
                <li><strong>Seguimiento:</strong> Mant√©n un registro de los cambios de estado para auditor√≠as</li>
            </ul>
        </div>
    </section>

    <!-- Botones de Navegaci√≥n -->
    <section class="seccion texto-centro">
        <a href="{% url 'detalle_empleado_rrhh' empleado.id %}" class="button">Ver Perfil del Empleado</a>
        <a href="{% url 'lista_empleados_rrhh' %}" class="button blue">Volver a Lista de Empleados</a>
        <a href="{% url 'dashboard_rrhh' %}" class="button green">Ir al Dashboard</a>
    </section>
</main>
{% endblock %}